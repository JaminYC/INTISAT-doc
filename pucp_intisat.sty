
% ======================================================
% PUCP - INTISAT DOCUMENT STYLE (Header + Spacing Enhanced)
% ======================================================

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pucp_intisat}[2025/11/07 PUCP INRAS Style]

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish,english]{babel}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{titlesec}
\usepackage{color}
\usepackage{array}
\usepackage{booktabs}
\usepackage{amsmath, amssymb}
\usepackage{etoolbox}

% === Configuración de página ===
\geometry{a4paper, top=2.7cm, bottom=2.7cm, left=2.8cm, right=2.8cm}
\setlength{\parskip}{0.7em}
\setlength{\parindent}{0pt}
\selectlanguage{english}

\definecolor{pucpblue}{RGB}{0,40,85}
\definecolor{intisatgray}{RGB}{60,60,60}
\definecolor{headerlinegray}{RGB}{180,180,180}

% Hipervínculos
\hypersetup{
  colorlinks=true,
  linkcolor=pucpblue,
  citecolor=pucpblue,
  urlcolor=pucpblue,
  pdftitle={INTISAT Project Documentation},
  pdfauthor={INRAS – PUCP},
}

% === Espaciado para encabezado/pie grandes ===
\setlength{\headheight}{35pt}
\setlength{\headsep}{25pt}
\setlength{\footskip}{20pt}

% === Encabezado y pie con logos más grandes ===
%\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\includegraphics[height=30pt]{figures/apsco_logo_small.png}}
\fancyhead[C]{\begin{tabular}{c}
    \textbf{APSCO Cubesat Competition} \\
    Detailed Design Report -- Ver. 1
\end{tabular}}
\fancyhead[R]{\includegraphics[height=30pt]{figures/pucp_inras_logo.png}}

\fancyfoot[L]{\includegraphics[height=40pt]{figures/isa_logo_small.jpg}}
\fancyfoot[C]{}
\fancyfoot[R]{\thepage}

\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
\renewcommand{\headrule}{\hbox to\headwidth{\color{headerlinegray}\leaders\hrule height \headrulewidth\hfill}}

% === Estilo de capítulos y secciones ===
\titleformat{\chapter}[display]
  {\normalfont\bfseries\color{pucpblue}\Large}
  {\filcenter\Huge\chaptertitlename~\thechapter}
  {0pt}
  {\titlerule[1pt]\vspace{1ex}\filright\Large}

\titleformat{\section}
  {\Large\bfseries\color{intisatgray}}
  {\thesection}{1em}{}

% Reducir separación vertical en capítulos
\makeatletter
\patchcmd{\@makechapterhead}{\vskip 40\p@}{\vskip 20\p@}{}{}
\patchcmd{\@makeschapterhead}{\vskip 40\p@}{\vskip 20\p@}{}{}
\makeatother

% Comando estándar para insertar figuras
\newcommand{\insertfigure}[3]{
\begin{figure}[h]
\centering
\includegraphics[width=#2\textwidth]{figures/#1}
\caption{#3}
\end{figure}
}
